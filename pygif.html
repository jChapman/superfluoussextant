<!DOCTYPE html>
<html lang="en">

<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">


        <title>How to Make Gifs Using Python</title>

        <!-- Bootstrap Core CSS -->
        <link href="http://superfluoussextant.com/theme/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="http://superfluoussextant.com/theme/css/clean-blog.min.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
            <link href="http://superfluoussextant.com/theme/css/code_blocks/tomorrow_night.css" rel="stylesheet">


        <!-- Custom Fonts -->
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->



        <meta name="description" content="Intro While gifs are an outdated format and terribly inefficient they remain a popular way to communicate on the internet. With so many...">

        <meta name="author" content="Jordan Chapman">

        <meta name="tags" content="programming">
        <meta name="tags" content="python">
        <meta name="tags" content="imagemagick">
        <meta name="tags" content="gif">
        <meta name="tags" content="jif">
        <meta name="tags" content="animation">

	                <meta property="og:locale" content="">
		<meta property="og:site_name" content="Superfluous Sextant">

	<meta property="og:type" content="article">
            <meta property="article:author" content="http://superfluoussextant.com/author/jordan-chapman.html">
	<meta property="og:url" content="http://superfluoussextant.com/pygif.html">
	<meta property="og:title" content="How to Make Gifs Using Python">
	<meta property="article:published_time" content="2017-04-16 00:00:00-04:00">
            <meta property="og:description" content="Intro While gifs are an outdated format and terribly inefficient they remain a popular way to communicate on the internet. With so many...">

            <meta property="og:image" content="http://superfluoussextant.com/static/soft_blue_glow-darkened.jpg">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@supersextant">
        <meta name="twitter:title" content="How to Make Gifs Using Python">

            <meta name="twitter:image" content="http://superfluoussextant.com/static/soft_blue_glow-darkened.jpg">

            <meta name="twitter:description" content="Intro While gifs are an outdated format and terribly inefficient they remain a popular way to communicate on the internet. With so many...">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://superfluoussextant.com/">Superfluous Sextant</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
        <header class="intro-header" style="background-image: url('static/soft_blue_glow-darkened.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>How to Make Gifs Using Python</h1>
                        <span class="meta">Posted by
                                <a href="http://superfluoussextant.com/author/jordan-chapman.html">Jordan Chapman</a>
                             on Sun 16 April 2017
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    <!-- Post Content -->
    <article>
        <div class="section" id="intro">
<h2>Intro</h2>
<p>While gifs are an outdated format and terribly inefficient they remain a popular way to communicate on the internet.
With so many ways to create, modify, and inspect images (<a class="reference external" href="https://pillow.readthedocs.io/en/latest/">Pillow</a>, <a class="reference external" href="http://opencv.org/">OpenCV</a>, and even <a class="reference external" href="http://www.scipy-lectures.org/advanced/image_processing/">scipy</a>)
in Python it seems only natural to want to make gifs in the same environment in which you created or edited your image.
Like many tasks you want to accomplish in python, someone has already done it and there is a library to assist you.
Also like many other tasks you want to accomplish in python there are several different packages that can be used to create gifs.</p>
<div class="section" id="the-setup">
<h3>The Setup</h3>
<p>I will present a couple options and show you how to use each of them to generate a gif from a series of still pictures.
This is my common use case, I have a series of images which represent some changing system and I want to animate the change.</p>
<p>For example here is a series of images I made:</p>
<img alt="A bunch of similar images" src="images\gifThis.png" />
<p>... and here is a generated gif:</p>
<img alt="An animated gif" src="images\gifThis.gif" />
<p>Some assumptions</p>
<ul class="simple">
<li>Python 3</li>
<li>You are in the directory with the images you want to turn into a gif</li>
<li>All the images are named so that lined up alphabetically they are in the order they should be shown in the gif (in the above image <tt class="docutils literal">brains_40.png</tt> comes first then <tt class="docutils literal">brainz_50.png</tt> and so on until <tt class="docutils literal">brainz_183.png</tt> which will be the last frame)</li>
</ul>
</div>
</div>
<div class="section" id="option-1-imagemagick">
<h2>Option 1: ImageMagick</h2>
<p>Love it or hate it <a class="reference external" href="https://www.imagemagick.org/">ImageMagick</a> has been around for a long time and is available for the three major operating systems (Linux, OSX, and Windows) and is even available in many Linux package repositories.
For this reason my go to when first trying to make a gif was ImageMagick by simply calling it through <a class="reference external" href="https://docs.python.org/3/library/subprocess.html">subprocess</a>. The implementation is below</p>
<pre class="code python literal-block">
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">gif_name</span> <span class="o">=</span> <span class="s1">'outputName'</span>
<span class="n">file_list</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">'*.png'</span><span class="p">)</span> <span class="c1"># Get all the pngs in the current directory</span>
<span class="nb">list</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'_'</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'.png'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span> <span class="c1"># Sort the images by #, this may need to be tweaked for your use case</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'image_list.txt'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">item</span><span class="p">)</span>

<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">'convert &#64;image_list.txt {}.gif'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">gif_name</span><span class="p">))</span> <span class="c1"># On windows convert is 'magick'</span>
</pre>
<p>Why can't we just run <cite>convert *.png out.gif</cite>? Because this sorts the images alphabetically which puts 10 before 2.</p>
<p>Why do you have to write a file out instead of just listing the individual files in the command? Command length restraints, if you have 100 images each names blah_# then that is at least 600 characters.</p>
<p>While this works and since I already had ImageMagick installed it was easy enough to implement, but it doesn't feel pythonic since we have to call an external program so let's look at more python-y solutions.</p>
</div>
<div class="section" id="option-2-moviepy">
<h2>Option 2: MoviePy</h2>
<!-- https://github.com/avyfain/conway/blob/master/conway/images.py -->
<!-- https://zulko.github.io/blog/2014/09/20/vector-animations-with-python/ -->
<p>I discovered <a class="reference external" href="https://zulko.github.io/moviepy/index.html">MoviePy</a> while looking to solve this problem and it looks very promising.
While it looks like it's primarily designed to make or edit videos it has gif making capability.
What's more it can even use ImageMagick as a <a class="reference external" href="https://zulko.github.io/moviepy/install.html#other-optional-but-useful-dependencies">back end for image conversion</a> (otherwise it uses <a class="reference external" href="https://imageio.readthedocs.io/">imageio</a>)</p>
<pre class="code python literal-block">
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">moviepy.editor</span> <span class="kn">as</span> <span class="nn">mpy</span>

<span class="n">gif_name</span> <span class="o">=</span> <span class="s1">'outputName'</span>
<span class="n">fps</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">file_list</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">'*.png'</span><span class="p">)</span> <span class="c1"># Get all the pngs in the current directory</span>
<span class="nb">list</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'_'</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'.png'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span> <span class="c1"># Sort the images by #, this may need to be tweaked for your use case</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">mpy</span><span class="o">.</span><span class="n">ImageSequenceClip</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="n">fps</span><span class="p">)</span>
<span class="n">clip</span><span class="o">.</span><span class="n">write_gif</span><span class="p">(</span><span class="s1">'{}.gif'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">gif_name</span><span class="p">),</span> <span class="n">fps</span><span class="o">=</span><span class="n">fps</span><span class="p">)</span>
</pre>
<p>I have found that it <a class="reference external" href="https://github.com/Zulko/moviepy/issues/190">fails to make gifs out of greyscale images</a> (the example I gave above was using greyscale images).
Other than that one issue MoviePy seems very nice, even printing out the backend used and a progress bar when creating the gif.</p>
<img alt="[MoviePy] Building file outputName.gif with imageio 100%|##########| 51/51 [00:00&lt;00:00, 53.29it/s]" src="images\moviepyoutput.png" />
<p>The creator of MoviePy has some interesting examples of using it to create gifs for example <a class="reference external" href="https://zulko.github.io/blog/2014/09/20/vector-animations-with-python/">Vector Animations With Python</a> and <a class="reference external" href="https://zulko.github.io/blog/2014/11/29/data-animations-with-python-and-moviepy/">Data Animations With Python and MoviePy</a> .</p>
</div>
<div class="section" id="other-options">
<h2>Other Options</h2>
<p>Here are some other options I looked into, but stopped digging into for various reasons.</p>
<div class="section" id="id1">
<h3>Pillow</h3>
<!-- https://stackoverflow.com/questions/24688802/saving-an-animated-gif-in-pillow -->
<p>I use Pillow to generate the images, it would be great to use it to generate the gifs.
It even appears that gifs are one of the <a class="reference external" href="https://pillow.readthedocs.io/en/latest/handbook/image-file-formats.html">&quot;fully supported formats&quot;</a> !
I even had hope that I could progressivly save frames as they were created with the <cite>append_images</cite> <a class="reference external" href="https://pillow.readthedocs.io/en/latest/handbook/image-file-formats.html#saving">argument</a> .
However the more I looked into creating gifs with Pillow the more <a class="reference external" href="https://github.com/python-pillow/Pillow/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20gif">bugs I found</a> including the fact that simply re-saving a gif increases the size of the gif.</p>
<p>For now I'm going to stick to one of the other options listed above because of the known (and unknown) issues in Pillow.</p>
<p>Here's an example of using Pillow to make gifs: <a class="reference external" href="https://github.com/JuanPotato/Legofy/blob/master/legofy/images2gif_py3.py">https://github.com/JuanPotato/Legofy/blob/master/legofy/images2gif_py3.py</a></p>
</div>
<div class="section" id="wand">
<h3>Wand</h3>
<p><a class="reference external" href="http://docs.wand-py.org/">Wand</a> is a Python wrapper for ImageMagick, which sounds great for anyone used to ImageMagick (aka convert). However it is <a class="reference external" href="https://github.com/dahlia/wand/issues/316">not compatible</a> with the latest version of ImageMagick and does not appear to be actively maintained.
(Maybe there is something to be said for reasons that <a class="reference external" href="http://www.graphicsmagick.org/FAQ.html#how-does-graphicsmagick-differ-from-imagemagick">GraphicsMagick split from ImageMagick</a>)</p>
</div>
</div>

    </article>

        <div class="tags">
            <p>tags: <a href="http://superfluoussextant.com/tag/programming.html">programming</a>, <a href="http://superfluoussextant.com/tag/python.html">python</a>, <a href="http://superfluoussextant.com/tag/imagemagick.html">imagemagick</a>, <a href="http://superfluoussextant.com/tag/gif.html">gif</a>, <a href="http://superfluoussextant.com/tag/jif.html">jif</a>, <a href="http://superfluoussextant.com/tag/animation.html">animation</a></p>
        </div>

    <hr>

        <div class="comments">
            <h2>Comments !</h2>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_shortname = 'superfluoussextant';
                var disqus_identifier = 'pygif.html';
                var disqus_url = 'http://superfluoussextant.com/pygif.html';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//superfluoussextant.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
            </div>
        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                            <li>
                                <a href="http://jordan-chapman.com">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-globe fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="https://twitter.com/supersextant">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/jChapman">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                    </ul>
<p class="copyright text-muted">
    Blog powered by <a href="http://getpelican.com">Pelican</a>,
    which takes great advantage of <a href="http://python.org">Python</a>.
</p>                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="http://superfluoussextant.com/theme/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="http://superfluoussextant.com/theme/js/bootstrap.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="http://superfluoussextant.com/theme/js/clean-blog.min.js"></script>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-82486268-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'superfluoussextant';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>

</html>